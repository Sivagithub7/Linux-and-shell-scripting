VIEWS:
======
- IT IS SUBSET OF A MAIN TABLE.
(OR)
- IT IS VIRTUAL TABLE / LOGICAL TABLE OF BASE TABLE.
- VIEW NOT STORING DATA / INFORMATION BUT IT CAN EXTRACT THE DATA
FROM A BASE TABLE AND SHOW / DISPLAY TO USER.
- VIEWS ARE CREATED WITH THE HELP OF "SELECT QUERY".
- WHEN WE PERFORM DML OPERATIONS THROUGH A VIEW INTERNALLY THOSE
OPERATIONS ARE EXECUTED ON BASE TABLE AND REFELECTED IN VIEW.
- HERE VIEW WILL ACT AS AN "INTERFACE" BETWEEN USER(DEVELOPER) AND
BASE TABLES.

EX:
USER <-------------> VIEWS <----------------> BASE TABLE
(INTERFACE)

PURPOSE OF VIEWS:
==================
1. SECURITY:
  > COLUMN LEVEL
  > ROW LEVEL
2. CHECKING INTEGRITY RULES
3. TO CONVERT COMPLEX QUERY INTO SIMPLE QUERY

EX:
CREATE VIEW V1
AS
SELECT S.STID,S.SNAME,C.CID,C.CNAME,C.CFEE,R.REGNO,R.REGDATA FROM
STUDENT S INNER JOIN COURSE C ON S.CID=C.CID INNER JOIN REGISTER R
ON C.CID=R.CID AND R.REGNO=1; -----------> COMPLEX QUERY

EX:
SELECT * FROM V1;----------> SIMPLE QUERY

TYPES OF VIEWS:
===============
1. SIMPLE VIEWS
2. COMPLEX VIEWS

1. SIMPLE VIEWS:
================
- WHEN WE CREATED A VIEW TO ACCESS THE REQUIRED DATA FROM A SINGLE
BASE TABLE IS CALLED AS "SIMPLE VIEW".
- BY DEFAULT SIMPLE VIEWS ARE SUPPORTED ALL DML OPERATIONS.

SYNTAX:
========
CREATE VIEW <VIEW NAME> AS <SELECT QUERY>;

EX:

SQL> CREATE VIEW V2 AS SELECT * FROM HYD WHERE JOB='CLERK';

View created.

SQL> SELECT * FROM V2;

       EID ENAME             SAL JOB        GENDER
---------- ---------- ---------- ---------- ----------
      1021 smith            8500 CLERK
      1010 smith             2.5 CLERK

SQL> CREATE VIEW VV AS SELECT * FROM EMP WHERE EMPNO=7369;

View created.

SQL> SELECT * FROM VV;

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM
---------- ---------- --------- ---------- --------- ---------- ----------
    DEPTNO
----------
      7369 SMITH      CLERK           7902 17-DEC-80        800
        20
>> . COMPLEX VIEWS:
==================
- WHEN WE CALLED AS A VIEW IS A COMPLEX VIEW.
> CREATED ON MULTIPLE BASE TABLES.
> BY USING "GROUP BY" CLAUSE
> BY USING "AGGREGATIVE FUNCTIONS"
> BY USING "HAVING" CLAUSE
> BY USING "DISTINCT" KEYWORD
> BY USING SET OPERATORS
> BY USING JOINS
> BY USING SUBQUERY.
- BY DEFAULT COMPLEX VIEWS ARE NOT ALLOWED DML OPERATIONS.

SYNTAX:
========
CREATE VIEW <VIEW NAME> AS <SELECT QUERY>;

EX:

SQL> CREATE VIEW VV AS SELECT EMPNO,ENAME,JOB FROM EMP WHERE JOB='CLERK';

View created.

SQL> SELECT * FROM VV;

     EMPNO ENAME      JOB
---------- ---------- ---------
      7369 SMITH      CLERK
      7876 ADAMS      CLERK
      7900 JAMES      CLERK
      7934 MILLER     CLERK

SQL> CREATE VIEW V8 AS SELECT DEPTNO,SUM(SAL) SUM_OF_SAL FROM EMP GROUP BY DEPTNO;

View created.

SQL> SELECT * FROM V8;

    DEPTNO SUM_OF_SAL
---------- ----------
        30      12050
        10      11800
        20      13400

SQL> CREATE VIEW V7 AS SELECT ENAME FROM HYD UNION SELECT ENAME FROM EMP;

View created.

SQL> SELECT * FROM V7;

ENAME
----------
ADAMS
ALLEN
BLAKE
CLARK
FORD
JAMES
JONES
KING
MARTIN
MILLER
SCOTT

ENAME
----------
SMITH
TURNER
WARD
allen
smith
ward

17 rows selected.

>> VIEW OPTIONS:
=============
1. WITH CHECK OPTION
2. WITH READ ONLY

1. WITH CHECK OPTION:
=====================
- THIS STATEMENT IS USED TO RESTRICTED ROWS(DATA) ON BASE TABLE
THROUGH A VIEW OBJECT.

> WITH CHECK OPTION:
EX:
CREATE A VIEW TO ACCESS AND ACCEPT EMPLOYEE DETAILS WHOSE SALARY IS
3000?
SQL> CREATE VIEW V5 AS SELECT * FROM EMP11
2 WHERE SAL=3000 WITH CHECK OPTION;
TESTING:
SQL> INSERT INTO V5 VALUES(1124,'SAI',1800);
ERROR at line 1:
ORA-01402: view WITH CHECK OPTION where-clause violation
SQL> INSERT INTO V5 VALUES(1124,'SAI',3000); -------ALLOWED


> WITH READ ONLY:
==================
- WHEN WE RESTRICTED DML OPERATIONS ON BASE TABLE THROUGH A VIEW
OBJECT.

EX: 
SQL> CREATE VIEW WRO AS SELECT * FROM HYD;

View created.

SQL> SELECT * FROM WRO;

       EID ENAME             SAL JOB        GENDER
---------- ---------- ---------- ---------- ----------
      1021 smith            8500 CLERK
      1022 allen            6500 ANALIST
      1023 ward             2500 MANAGER
      1010 smith             2.5 CLERK

SQL> INSERT INTO HYD GENDER='M' WHERE EID=1021;
INSERT INTO HYD GENDER='M' WHERE EID=1021
                      *
ERROR at line 1:
ORA-00926: missing VALUES keyword


SQL> UPDATE HYD SET GENDER='M' WHERE EID=1021;

1 row updated.

SQL> SELECT * FROM WRO;

       EID ENAME             SAL JOB        GENDER
---------- ---------- ---------- ---------- ----------
      1021 smith            8500 CLERK      M
      1022 allen            6500 ANALIST
      1023 ward             2500 MANAGER
      1010 smith             2.5 CLERK

SQL> CREATE VIEW WRO AS SELECT * FROM HYD WITH READ ONLY;
CREATE VIEW WRO AS SELECT * FROM HYD WITH READ ONLY
            *
ERROR at line 1:
ORA-00955: name is already used by an existing object


SQL> CREATE VIEW WR AS SELECT * FROM HYD WITH READ ONLY;

View created.

SQL> SELECT * FROM WR;

       EID ENAME             SAL JOB        GENDER
---------- ---------- ---------- ---------- ----------
      1021 smith            8500 CLERK      M
      1022 allen            6500 ANALIST
      1023 ward             2500 MANAGER
      1010 smith             2.5 CLERK

SQL> UPDATE HYD SET GENDER='M' WHERE EID=1022;

1 row updated.

SQL> UPDATE WR SET GENDER='F' WHERE EID=1023;
UPDATE WR SET GENDER='F' WHERE EID=1023
              *
ERROR at line 1:
ORA-42399: cannot perform a DML operation on a read-only view.



>> FORCE VIEW:
===========
- GENERALLY VIEWS ARE CREATED BASED ON BASE TABLES WHERE AS
FORCE VIEWS ARE CREATED WITHOUT BASE TABLE.
SYNTAX:
========
CREATE FORCE VIEW <VIEW NAME> AS <SELECT QUERY>;

